<!DOCTYPE html>
<html>

<head>
  <base target="_top">
  <?!= include('Stylesheet'); ?>
</head>

<body>
  <div class="container">
    <h1>Agendamento de Aulas</h1>
    <p>Usuário: <span id="user-email">Carregando...</span> | Papel: <span id="user-role">Carregando...</span></p>

    <div id="reposicao-section" class="section" style="display: none;">
      <h2>Agendar Reposição</h2>
      <p>Reposições só podem ser feitas em horários vagos e disponíveis.</p>
      <button onclick="loadAvailableSlots('Reposicao')">Buscar Horários Vagos Disponíveis</button>

      <div id="reposicao-slots" class="slots-list"> <!-- Reposições --> </div>

      <div id="reposicao-form" class="booking-form" style="display: none;">
        <h3>Detalhes da Reposição</h3>
        <p>Slot Selecionado: <span id="reposicao-selected-slot-info"></span></p>
        <input type="hidden" id="reposicao-selected-slot-id">

        <label for="reposicao-professor-real">Professor que irá repor:</label>
        <select id="reposicao-professor-real" required>
          <option value="" disabled selected>-- Professores --</option>
        </select>

        <label for="reposicao-disciplina">Disciplina da Reposição:</label>
        <select id="reposicao-disciplina" required>
          <option value="" disabled selected>-- Disciplinas --</option>
        </select>

        <button onclick="bookSlot('Reposicao')">Confirmar Agendamento de Reposição</button>
        <button type="button" onclick="cancelBookingForm('Reposicao')">Cancelar</button>
      </div>
    </div>

    <hr>

    <div id="substituicao-section" class="section" style="display: none;">
      <h2>Agendar Substituição</h2>
      <p>Substituições só podem ser feitas em horários fixos que não estejam ocupados por reposições.</p>
      <button onclick="loadAvailableSlots('Substituicao')">Buscar Horários Fixos Disponíveis</button>

      <div id="substituicao-slots" class="slots-list"> <!-- Substituições --> </div>

      <div id="substituicao-form" class="booking-form" style="display: none;">
        <h3>Detalhes da Substituição</h3>
        <p>Slot Selecionado: <span id="substituicao-selected-slot-info"></span></p>
        <input type="hidden" id="substituicao-selected-slot-id">

        <label for="substituicao-professor-real">Professor Substituto:</label>
        <select id="substituicao-professor-real" required>
          <option value="" disabled selected>-- Professores --</option>
        </select>

        <label for="substituicao-disciplina">Disciplina da Substituição:</label>
        <select id="substituicao-disciplina" required>
          <option value="" disabled selected>-- Disciplinas --</option>
        </select>

        <button onclick="bookSlot('Substituicao')">Confirmar Agendamento de Substituição</button>
        <button type="button" onclick="cancelBookingForm('Substituicao')">Cancelar</button>
      </div>
    </div>

    <div id="loading" class="loading" style="display: none;">Carregando...</div>
    <div id="message" class="message"></div>
  </div>

  <?!= include('Javascript'); ?>
</body>

</html>